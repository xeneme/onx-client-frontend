vue-cli-service serve --mode development

# Пользователь

Пользователем считается любой клиент, использующий систему.

## Аутентификация

Пользователь может пройти процедуру аутентификации, используя:

1.  Ключевую пару "Адрес электронной почты + пароль"

Дублирование адреса электронной почты не запрещается.

## Персональные данные

*  Имя `обязательно`
*  Дата рождения
*  Страна
*  Адрес
*  Почтовый индекс
*  Адрес Смарт-Контракта

## Подтверждение персональных данных

Способы подтверждения:

*  Адрес электронной почты - электронное письмо со ссылкой.

## Регистрация

Пользователь может пройти процедуру регистрации:

*  Введя ключевую пару "Адрес электронной почты + пароль" с обязательным подтверждением адреса электронной почты.
*  Подтверждение электронной почты может быть отключено пользователем c ролью `admin`
*  После регистрации создается `smart-contract` (биткоин адрес) в сети блокчейн и присваиваться клиенту

## Привязка менеджером

После регистрации пользователя, любой менеджер в административной панели может привязать к себе (`Пользователя`) используя его **адрес электронной почты** (логин в системе) или **адрес смарт-контракта**.
(`Пользователь`) может быть привязан только к одному менеджеру. Привязка содержит:

*  Пользователь - менеджер
*  Пользователь
*  Время привязки
*  Активность

Менеджер может отвязать от себя (`Пользователя`), при этом в записи привязки
сменится **Активность** на false, после этого (`Пользователь`) становится доступен для привязки
любым менеджером системы.

## Роли права доступа

Для разграничения прав доступа пользователей используется модель [ACL][]

Роли:

* guest - клиент, не прошедший процедуру аутентификации
* user - пользователь, клиент прошедший регистрацию и процедуру аутентификации
* manager - привилегированный пользователь
* admin - администратор

Ресурсами являются конкретные сущности системы.

Превилегии:

* add - добавление
* update - обновление
* update:self - обновление собственных
* delete - удаление
* delete:self - удаление собственных
* read - чтение
* read:self - чтение собственных

[ACL]: https://ru.wikipedia.org/wiki/ACL

# Баланс пользователя
Любые операции по движению средств на счете пользователя отражаются в **журнале операций** `Payment`, включающем следующие реквизиты:

* Идентификатор
* Менеджер - идентификатор менеджера
* Пользователь - идентификатор пользователя
* Сумма - положительное число для активов и отрицательное для пассивов
* Баланс - остаток на счете пользователя
* Дата создания

Баланс пользователя не может быть отрицательным.

## Актив
Валютой платежа является доллар. Сумма минимального платежа составляет 0.01 BTC.

Данные операции отражаются в **реестре активов** (`Asset`), включающем следующие реквизиты:

* Идентификатор
* Идентификатор операции - идентификатор в журнале операций
* Инициатор платежа (идентификатор пользователя в системе)
* Получатель (идентификатор пользователя в системе) 
* Сумма
* Статус - в обработке, успешно, ошибка 
* Дата создания
* Адрес смарт-контракта
* Время жизни актива `30 мин`

Сумма пополнения

## Пассив

Данные операции отражаются в **реестре пассивов** (`Liability`), включающем следующие реквизиты:

* Идентификатор
* Идентификатор операции - идентификатор в журнале операций
* Отправитель - идентификатор пользователя
* Получатель - идентификатор пользователя
* Сумма
* Дата создания
* Тип (перевод другому пользователю, списание администратором, покупка майнинга).

Пассив не может быть оформлен на сумму, превышающую текущий баланс пользователя.

## Примеры движения средств

Перевод средств счета пользователя, на другой счет пользователя.

1. Оформление операции в журнале пассивов (`Liability`)
2. Регистрация расхода в журнале операций (`Payment`)
3. Оформление операции в журнале активов (`Asset`)
4. Регистрация прихода в журнале операций (`Payment`)

Для внутреннего перевода между пользователями используются средства на счете.

За каждый перевод будет взиматься комиссия в установленном размере в
административной панели в разделе (`Баланс`) пользователем с ролью `admin`

Отмены операции перевода у пользователей нет.

## Пополнение баланса менеджером

Зачисление средств на счет пользователя:

1. Менеджер вводит **адрес электронной почты** или **адрес смарт-контракта** пользователя и указывает сумму.
2. Оформление операции в журнале активов (`Asset`)
3. Регистрация прихода в журнале операций (`Payment`)


## Пополнение баланса пользователем

Зачисление средств на счет:

1.  В разделе **Депозит** пользователь вводит баланс и получает `адрес смарт-контракта`, который необходимо пополнить, если пополненная сумма отличается от указанной, то указанная сумма меняется на пополненную и статус `Актива` меняется на `успешно`.
2.  Итоговую сумму нужно умножить на процент комиссии, которая указывается пользователем с ролью `admin` в административной панели в разделе **Комиссии**.
3. При любом пополнении `адреса смарт-контракта` на баланс должна зачислятся пополненная сумма.
## Событие

Это абстрактная бизнес-сущность описывающая действия пользователей в системе, включает в себя:

*  Пользователь
*  Действие - которое будет совершено пользователем.
*  IP адрес
*  Время

**Событие** будет создаваться при следующих действиях непривилегированного пользователя:

*  Переходы на страницы
*  При клике на кнопки в системе
*  Вход / Выход из системы
*  Изменение персональных данных
*  Операции перевода
*  Подтверждение получения сообщений
*  Отправка сообщения

**Событие** будет удалятся если с момента его создания прошло **2 недели**.

**События** для привилегированного пользователя будут создаваться при любых действиях
`Добавления`, `Изменения`, `Удаления` кроме `Просмотра`.

Менеджеры системы не имеют возможность удалять **события**.

Доступ к разделу `Cобытия` имеют пользователи с ролью `admin` и `manager`

Для пользователей с ролью `manager` должны отображаться только события пользователей с ролью `user` привязанных к нему.

Это абстрактная бизнес-сущность, которая включает в себя:
•	Целевой пользователь
•	Автор
•	Заголовок
•	Сообщение
•	Тип уведомления (системное сообщение, информация, успех, ошибка)
•	Время уведомления
•	Время создания
•	Статус (не просмотрено, просмотрено)
Уведомления создаются, пользователями с ролью manager и admin.
Менеджеры имеют право отправлять уведомления только своим закрепленным пользователям.
Администраторы имеют право отправлять уведомления всем пользователям системы.
У менеджеров отображается подтверждение просмотра сообщения пользователем. Пользователь получается все уведомления после авторизации.
Автоматические события при которых создаются уведомления
•	Создание депозита тип системное сообщение поле с адресом смарт-контракта и QR-кодом. кастомный текст 
•	Снятие баланса тип системное сообщение кастомный текст 
•	Успешный перевод средств тип успех 
•	Пополнение баланс тип успех 
•	Получено сообщение от поддержки тип информация 
Сообщения уведомлений прописываются для каждого не привилегированного пользователя отдельно.
Email уведомления
•	Снятие баланса (по умолчанию выключено) кастомный текст 
Email уведомления могут включать/выключать пользователи с ролью manager и admin для каждого пользователя.
# Валюта

Это абстрактная бизнес-сущность системы, описывающая реальную денежную или крипто валюту. Валюта включает в себя:

*  Название
*  Стоимость по отношению к доллару
*  Авто-обновление курса (да / нет)
*  Время создания
*  График изменения курса

Валют может быть не ограниченное количество. Конвертации всех валют будут происходить исходя
из отношения **доллар:валюта**. В баланс пользователя будет числится в валюте **доллар**.

Конвертация из одной валюты в другую будет происходить по следующей схеме:

Необходимо перевести 1 BTC в ETH.

1 BTC = $6 000;
1 ETH = $500;

$6000(1 BTC) / $500(1 ETH) = 12 (ETH);

1 BTC = 12 ETH;

Список курсов для которых необходимо автоматическое обновление, с использованием сторонних сервисов:

*  BTC (Bitcoin)
*  ETH (Ethereum)
*  XRP (Ripple)
*  BCH (Bitcoin cash)
*  LTC (Litecoin)
*  TRX (Tronix)
*  DASH (Dash)
*  NEO (Neo)
*  XMR (Monero)
# Контент

Это абстрактная бизнес-сущность системы, описывающая информационный контент сайта, контент содержит:

*  Заголовок
*  Пользователь - менеджер
*  Контент
*  Место расположения
*  Время создания

Место расположение - это блок на сайте, в котором будет выводится указанный контент.
Только один контент можно прикрепить к расположению.

Места расположения на сайте:

`Выбрать после дизайна`
Ставка

Это бизнес-сущность описывающая ставку на бирже криптовалют, она содержит:

*  Пользователь
*  Тип ставки (long/short)
*  Плечо на выбор:
    *  x1 (lose 100%)
    *  x5 (lose 50%)
    *  x10 (lose 35%)
    *  x25 (lose 15%)
    *  x50 (lose 7%)
    *  x100 (lose 2%)
*  Ставка
*  Лимит (null, 10%)

Комиссия добавляется к проценту выигрыша, она составляет **1%**. 

**Ставку** может делать любой пользователь с балансом не менее 50$. Пользователь может в любой момент завершить **ставку**.

Пользователь делает ставку **100$** с плечом **x5** при текущем курсе **1 BTC = 7 000$**, на курс **7 700$** выбирая тип long.

Ставка умножается на x5: **100$ x 5 = 500$**
Курс изменился на 10%:

Расчет выигрыша: **500$ + 9%(-1% комиссия) = 45$**

В случае если курс отклоняется в противоположную сторону больше чем на 50%, ставка проигрывает.```

# Сообщения

Сообщение это абстрактная-бизнес сущность описывающая сообщения между пользователями в системе, оно включает в себя:

*  Получатель
*  Отправитель
*  Сообщение
*  Время создания

## Отправка сообщения привилегированным пользователем

*  Пользователь с ролью `manager` может отправлять сообщения только привязанным к нему пользователям.
*  Пользователь с ролью `admin` может отправлять сообщения любым пользователям.

## Отправка сообщения не привилегированным пользователем

Если пользователь не привязан к менеджеру, сообщения будут приходить к пользователям с ролью `admin`, если привязан то сообщения будут отправляться только к привязанному менеджеру.

Сообщения должны хранится в системе `6 месяцев`.

# Требования к верстке

Верстка должна быть адаптивной и кроссбраузерной с показателем не ниже **90%** на сервисе [caniuse.com](https://caniuse.com).

Наименование селекторов должно формироваться исходя из методологии [БЭМ](https://ru.bem.info/methodology/)

В качестве html-шаблонизатора использовать [PUG](https://pugjs.org/api/getting-started.html)

Для CSS использовать препроцессор [SASS](https://sass-lang.com/)


Карта сайта
•	Веб сайт 
o	Main
o	Exchange
o	About us
o	How it works
o	Mining
o	More 
	Statistics
	Announcements
	Media contact
	Privacy Policy
o	Cabinet 
	Application
	Support
	Register
	Promo
	Wallet
________________________________________
•	Административная панель 
o	Пользователи 
	Создание пользователя
	Редактирование пользователя
	Список пользователей
o	Платежи 
	Пополнить баланс
	Список платежей
	Переводы
	Журнал операций
o	События 
	Действия пользователя
	Действия менеджера
o	Уведомления 
	Создать уведомление
	Редактировать уведомление
	Список уведомлений
o	Валюты 
	Добавить валюту
	Изменить валюту
	Список валют
o	Контент 
	Добавить контент
	Изменить контент
	Список контента

